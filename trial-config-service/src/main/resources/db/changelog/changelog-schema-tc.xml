<?xml version="1.1" encoding="UTF-8" standalone="no"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
                   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                   xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.9.xsd">

    <changeSet author="katesan - edited" id="1608062861281-0">
        <preConditions  onFail="MARK_RAN">
            <not><tableExists  tableName="revinfo"></tableExists></not>
        </preConditions>
        <createTable tableName="revinfo">
            <column autoIncrement="true"  name="rev" type="int">
                <constraints nullable="false" primaryKey="true" primaryKeyName="PK__revinfo__C2B7CC698F69951C"/>
            </column>
            <column name="revtstmp" type="bigint"/>
        </createTable>
    </changeSet>

    <changeSet author="katesan (generated)" id="1608062861281-1">
        <createTable tableName="person">
            <column name="id" type="BIGINT">
                <constraints nullable="false" primaryKey="true" primaryKeyName="person_pkey"/>
            </column>
            <column name="azure_oid" type="VARCHAR(255)"/>
            <column name="modified_time" type="TIMESTAMP WITHOUT TIME ZONE"/>
            <column name="modified_by" type="VARCHAR(255)"/>
            <column name="trialsite_id" type="BIGINT"/>
        </createTable>
    </changeSet>
    <changeSet author="katesan (generated)" id="1608062861281-2">
        <createTable tableName="trial_site">
            <column name="id" type="BIGINT">
                <constraints nullable="false" primaryKey="true" primaryKeyName="trial_site_pkey"/>
            </column>
            <column name="fhir_organization_id" type="VARCHAR(255)"/>
            <column name="modified_time" type="TIMESTAMP WITHOUT TIME ZONE"/>
            <column name="modified_by" type="VARCHAR(255)"/>
            <column name="site_name" type="VARCHAR(255)"/>
            <column name="site_type" type="INTEGER"/>
            <column name="trial_id" type="VARCHAR(255)"/>
        </createTable>
    </changeSet>
    <changeSet author="katesan (generated)" id="1608062861281-3">
        <createTable tableName="person_aud">
            <column name="id" type="BIGINT">
                <constraints nullable="false" primaryKey="true" primaryKeyName="person_aud_pkey"/>
            </column>
            <column name="rev" type="INTEGER">
                <constraints nullable="false" primaryKey="true" primaryKeyName="person_aud_pkey"/>
            </column>
            <column name="revtype" type="SMALLINT"/>
            <column name="azure_oid" type="VARCHAR(255)"/>
            <column name="modified_time" type="TIMESTAMP WITHOUT TIME ZONE"/>
            <column name="modified_by" type="VARCHAR(255)"/>
            <column name="trialsite_id" type="BIGINT"/>
        </createTable>
    </changeSet>

    <changeSet author="katesan (generated)" id="1608062861281-4">
        <createTable tableName="trial_site_aud">
            <column name="id" type="BIGINT">
                <constraints nullable="false" primaryKey="true" primaryKeyName="trial_site_aud_pkey"/>
            </column>
            <column name="rev" type="INTEGER">
                <constraints nullable="false" primaryKey="true" primaryKeyName="trial_site_aud_pkey"/>
            </column>
            <column name="revtype" type="SMALLINT"/>
            <column name="fhir_organization_id" type="VARCHAR(255)"/>
            <column name="modified_time" type="TIMESTAMP WITHOUT TIME ZONE"/>
            <column name="modified_by" type="VARCHAR(255)"/>
            <column name="site_name" type="VARCHAR(255)"/>
            <column name="site_type" type="INTEGER"/>
            <column name="trial_id" type="VARCHAR(255)"/>
        </createTable>
    </changeSet>
    <changeSet author="katesan (generated)" id="1608062861281-5">
        <createTable tableName="trial_aud">
            <column name="id" type="VARCHAR(255)">
                <constraints nullable="false" primaryKey="true" primaryKeyName="trial_aud_pkey"/>
            </column>
            <column name="rev" type="INTEGER">
                <constraints nullable="false" primaryKey="true" primaryKeyName="trial_aud_pkey"/>
            </column>
            <column name="revtype" type="SMALLINT"/>
            <column name="fhir_organization_id" type="VARCHAR(255)"/>
            <column name="modified_time" type="TIMESTAMP WITHOUT TIME ZONE"/>
            <column name="modified_by" type="VARCHAR(255)"/>
            <column name="status" type="INTEGER"/>
            <column name="trial_name" type="VARCHAR(255)"/>
        </createTable>
    </changeSet>

    <changeSet author="katesan (generated)" id="1608062861281-8">
        <createTable tableName="trial">
            <column name="id" type="VARCHAR(255)">
                <constraints nullable="false" primaryKey="true" primaryKeyName="trial_pkey"/>
            </column>
            <column name="fhir_organization_id" type="VARCHAR(255)"/>
            <column name="modified_time" type="TIMESTAMP WITHOUT TIME ZONE"/>
            <column name="modified_by" type="VARCHAR(255)"/>
            <column name="status" type="INTEGER"/>
            <column name="trial_name" type="VARCHAR(255)"/>
        </createTable>
    </changeSet>
    <changeSet author="katesan (generated)" id="1608062861281-9">

        <createSequence cacheSize="1" cycle="false" incrementBy="1" maxValue="9223372036854775807" minValue="1" sequenceName="hibernate_sequence" startValue="1"/>
    </changeSet>
    <changeSet author="katesan (generated)" id="1608062861281-10">
        <addUniqueConstraint columnNames="azure_oid" constraintName="uk_tmnipuyul9xdeeg7b7oi4thfb" tableName="person"/>
    </changeSet>
    <changeSet author="katesan (generated)" id="1608062861281-11">
        <addForeignKeyConstraint baseColumnNames="trialsite_id" baseTableName="person" constraintName="fk7fwruaygke24ajkmcwr9eh0ag" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="trial_site" validate="true"/>
    </changeSet>
    <changeSet author="katesan (generated)" id="1608062861281-12">
        <addForeignKeyConstraint baseColumnNames="trial_id" baseTableName="trial_site" constraintName="fkqkv9jw9saxp4goho8xc6eatyb" deferrable="false" initiallyDeferred="false" onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="trial" validate="true"/>
    </changeSet>
    <changeSet author="katesan (generated)" id="1608062861281-14">
        <createSequence cacheSize="1" cycle="false" incrementBy="1" maxValue="9223372036854775807" minValue="1" sequenceName="person_sequence" startValue="1"/>
    </changeSet>
    <changeSet author="katesan (generated)" id="1608062861281-15">
        <createSequence cacheSize="1" cycle="false" incrementBy="1" maxValue="9223372036854775807" minValue="1" sequenceName="trialsite_sequence" startValue="1"/>
    </changeSet>

</databaseChangeLog>
